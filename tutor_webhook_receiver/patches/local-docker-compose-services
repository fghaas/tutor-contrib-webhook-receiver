############# Webhook-receiver
webhook-receiver:
  image: {{ WEBHOOK_RECEIVER_DOCKER_IMAGE }}
  command: gunicorn --env DJANGO_SETTINGS_MODULE=webhook_receiver.settings.production webhook_receiver.wsgi:application --bind 0.0.0.0:8090
  ports:
      - "8090:8090"
  restart: unless-stopped
  environment:
      - DB_MIGRATION_ENGINE=django.db.backends.mysql
      - DB_MIGRATION_NAME={{ WEBHOOK_RECEIVER_DB_NAME }}
      - DB_MIGRATION_USER={{ WEBHOOK_RECEIVER_DB_USER }}
      - DB_MIGRATION_PASS={{ WEBHOOK_RECEIVER_DB_PASSWORD }}
      - DB_MIGRATION_HOST={{ MYSQL_HOST }}
      - DB_MIGRATION_PORT={{ MYSQL_PORT }}
      - 'DB_MIGRATION_OPTIONS={{ WEBHOOK_RECEIVER_DB_MIGRATION_OPTIONS|tojson }}'
      - DJANGO_SECRET_KEY={{ WEBHOOK_RECEIVER_DJANGO_SECRET_KEY }}
      - DJANGO_WEBHOOK_RECEIVER_LMS_BASE_URL={{ WEBHOOK_RECEIVER_LMS_ROOT_URL }}
      - DJANGO_WEBHOOK_RECEIVER_EDX_OAUTH2_KEY={{ WEBHOOK_RECEIVER_EDX_OAUTH2_KEY }}
      - DJANGO_WEBHOOK_RECEIVER_EDX_OAUTH2_SECRET={{ WEBHOOK_RECEIVER_EDX_OAUTH2_SECRET }}
      - DJANGO_WEBHOOK_RECEIVER_SETTINGS_SHOPIFY_SHOP_DOMAIN={{ WEBHOOK_RECEIVER_SHOPIFY_SHOP_DOMAIN }}
      - DJANGO_WEBHOOK_RECEIVER_SETTINGS_SHOPIFY_API_KEY={{ WEBHOOK_RECEIVER_SHOPIFY_API_KEY }}
      - DJANGO_WEBHOOK_RECEIVER_SETTINGS_WOOCOMMERCE_SOURCE={{ WEBHOOK_RECEIVER_WOOCOMMERCE_SOURCE }}
      - DJANGO_WEBHOOK_RECEIVER_SETTINGS_WOOCOMMERCE_SECRET={{ WEBHOOK_RECEIVER_WOOCOMMERCE_SECRET }}
      - DJANGO_LOG_LEVEL={{ WEBHOOK_RECEIVER_DJANGO_LOG_LEVEL }}
  volumes:
      - /dev/log:/dev/log:rw
  depends_on:
      - mysql
